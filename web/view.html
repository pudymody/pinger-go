<!doctype html>
	<html>
	<head>
	<meta charset="UTF-8" /> 
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="stylesheet" href="/assets/styles.css"/>
	<script src="/assets/apexcharts.js"></script>
	</head>
	<body>
		<header class="container mx-auto flex items-center bg-card px-4 py-2 sm:px-6 sm:py-3 border border-border/60 bt-0 rounded-md my-4 sticky top-0 z-1">
			<a href="/" class="block p-1 hover:bg-main rounded-md"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
  <path stroke-linecap="round" stroke-linejoin="round" d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
</svg></a>
			<nav class="flex ms-auto">
				<a class="block p-1 hover:bg-main rounded-md" href="/?from={{ .PreviousDay.Format "2006-01-02" }}">
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
  <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
</svg>
</a>
				<input type="date" class="rounded-md border text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 p-1 border-border/60 bg-main" value="{{ .CurrentDay.Format "2006-01-02" }}" onchange="window.location = '/?from='+this.value">
				<a class="block p-1 hover:bg-main rounded-md" href="/?from={{ .NextDay.Format "2006-01-02" }}">
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
  <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
</svg>
</a>
			</nav>
		</header>
		{{ range .Items }}
			<div class="container mx-auto rounded-lg border border-border/60 bg-card text-card-foreground shadow-sm px-4 sm:px-6 pt-3 sm:pt-4 pb-5">
				<h1 class="font-semibold tracking-tight text-xl sm:text-2xl">{{ .Endpoint.Domain }}</h1>
				<div class="chart_{{ .Endpoint.ID }}"></div>
			</div>
			<script>
				new ApexCharts(document.querySelector(".chart_{{ .Endpoint.ID }}"), {
				 tooltip: {
						x: {
							format: 'HH:mm',
						},
						marker : { show: false }
					},
					chart: {
						height: 300,
						type: 'line',
						toolbar: { show: false },
						zoom : { enabled : true }
					},
					stroke: {
						width: 1.5
					},
					series: [{
						name: 'Latency',
						data: {{ hitLatencies .Hits }}
					}],
					xaxis: {
					 type: 'datetime',
						labels: {
							datetimeUTC: false,
						},
						categories: {{ hitDates .Hits }}
					},
					annotations: {
						xaxis: {{ hitAnnotations .Hits }} 
					}
				}).render();
			</script>
		{{ end }}
	</body>
</html>
